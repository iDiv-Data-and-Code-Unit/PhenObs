{% extends "base.html" %}
{% load static %}

{% block observations_active %}active{% endblock observations_active %}

{% block nav %}
  {% include 'nav.html' %}
{% endblock nav %}

{% block custom_javascript %}
  <script type="module" defer src="{% static 'js/observations.js' %}"></script>
  <script type="module" defer src="{% static 'js/collection.js' %}"></script>
{% endblock custom_javascript %}

{% block content %}
  {% include 'observations/last_observation.html' %}
  <div class="jumbotron-fluid custom-jumbotron p-3 p-md-3 p-lg-4 my-4">
    <div class="row justify-content-between">
      <h1 class="col-9 col-md-6 col-lg-7 col-xl-8 gray-text">All collections</h1>
      <button class="narrow-button pl-2 px-sm-3 col-2 mx-auto col-md-5 col-lg-4 col-xl-3 mx-md-4" onclick="location.href='{% url 'observations:add' %}'">
        <div class="d-inline gray-text">
          <img class="pr-2" src="{% static 'images/add_collection.png' %}" height="35" alt=""/>
          <span class="d-none d-md-inline">Add collection</span>
        </div>
      </button>
    </div>

    <div class="mt-1" id="all-collections">
      <table class="table table-borderless" id="all-collections-table">
        <thead class="">
          <tr class="d-table-row">
            <th scope="col" class="text-left">Date</th>
            <th scope="col" class="text-left">Creator</th>
            <th scope="col" class="text-left">Status</th>
            <th scope="col" class="text-left">Upload</th>
            <th scope="col" class="text-left">Edit</th>
            <th scope="col" class="text-left">Delete</th>
          </tr>
        </thead>
        <tbody class="" id="all-collections-body">
          {% for collection in collections %}
          <tr class="d-table-row">
            <th scope="row" class="text-left">{{ collection.date }}</th>
            <td class="text-left">{{ collection.creator }}</td>
            {#     TODO: add buttons for edit; add state (local/online/unfinished)     #}
            <td>
              <i class="bi bi-cloud-check-fill" style="font-size: 1.5rem; color: green;" id="{{ collection.id }}-online"></i>
              <i class="bi bi-hdd-fill d-none" style="font-size: 1.5rem; color: green;" id="{{ collection.id }}-local"></i>
              <i class="bi bi-exclamation-circle-fill d-none" style="font-size: 1.5rem; color: red;" id="{{ collection.id }}-unfinished"></i>
            </td>
            <td>
              <a href="">
                <i class="bi bi-cloud-upload-fill d-none" style="font-size: 1.5rem; color: blue;" id="{{ collection.id }}-upload"></i>
              </a>
            </td>
            <td>
              <a href="{% url 'observations:edit' collection_id=collection.id %}">
                <i class="bi bi-pencil-fill" style="font-size: 1.5rem; color: goldenrod;" id="{{ collection.id }}-edit"></i>
              </a>
            </td>
            <td>
              <a onclick="cancelCollection({{ collection.id }})">
                <i class="bi bi-x-circle-fill" style="font-size: 1.5rem; color: red;" id="{{ collection.id }}-cancel"></i>
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="align-items-center d-md-flex d-block">
      <div>
        <i class="bi bi-cloud-check-fill mr-2" style="font-size: 1.5rem; color: green;"></i>
        Available online
      </div>
      <div>
        <i class="bi bi-hdd-fill ml-md-3 mr-2" style="font-size: 1.5rem; color: green;"></i>
        Available locally
      </div>
      <div>
        <i class="bi bi-exclamation-circle-fill ml-md-3 mr-2" style="font-size: 1.5rem; color: red;"></i>
        Incomplete
      </div>
  </div>
{% endblock content %}
